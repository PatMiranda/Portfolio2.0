{"version":3,"file":"audible-api.umd.js","sources":["../node_modules/felix/lib/Cache.js","../node_modules/felix/lib/Factory.js","../src/client.js","../src/api.js"],"sourcesContent":["/**\n * Construct a new Cache object\n */\nvar Cache = module.exports = function () {\n  this.clear();\n};\n\nCache.prototype = {\n  put: put,\n  get: get,\n  remove: remove,\n  clear: clear,\n  size: size,\n  keys: keys\n};\n\n/**\n * Put a key-value pair into the cache\n *\n * @param {String} key The key that the value will be cached with\n * @param {Object} val The value of the cache entry\n */\nfunction put(key, val) {\n  // Don't increment size if key already exists\n  if (typeof this.__store[key] === 'undefined') {\n    this.__size++;\n  }\n  this.__store[key] = val;\n};\n\n/**\n * Get a cached value for `key`\n *\n * @param {String} key The key that the value is expected to be cached with\n * @returns {Object} The value associated with `key`, otherwise undefined\n */\nfunction get(key) {\n  return this.__store[key];\n};\n\n/**\n * Remove the cached value for `key`\n *\n * @param {String} key The key that the value is cached with\n */\nfunction remove(key) {\n  // Don't decrement if key doesn't exist\n  if (typeof this.__store[key] !== 'undefined') {\n    this.__size--;\n  }\n  delete this.__store[key];\n};\n\n/**\n * Clear all cached values\n */\nfunction clear() {\n  this.__size = 0;\n  this.__store = {};\n};\n\n/**\n * Get the size of the cache\n *\n * @returns {number} The number of cached items\n */\nfunction size() {\n  return this.__size;\n};\n\n/**\n * Get all the cache keys\n *\n * @returns {Array} The cache keys\n */\nfunction keys() {\n  return oKeys(this.__store);\n};\n\n/**\n* Polyfill for Object.keys\n*/\nvar oKeys = Object.keys || function (obj) {\n  if (typeof obj !== 'object' && (typeof obj !== 'function' || obj === null)) {\n    throw new TypeError('Object.keys called on non-object');\n  }\n\n  var result = [];\n  for (var key in obj) {\n    result.hasOwnProperty.call(obj, key) && result.push(key);\n  }\n  return result;\n};\n","var Cache = require('./Cache');\nvar Factory = module.exports = {};\nvar __store = {};\n\n/**\n * Construct a Cache object\n *\n * @param {String} id The id of the cache\n * @returns {Cache} The newly created cache\n */\nFactory.create = function (id) {\n  __store[id] = new Cache();\n  return __store[id];\n};\n\n/**\n * Get a Cache object by ID\n *\n * @param {String} id The id of the cache\n * @returns {Cache} The cache if it exists, otherwise undefined\n */\nFactory.get = function (id) {\n  return __store[id];\n};\n\n/**\n* Remove a cache\n*\n* @param {String} id The id of the cache to be removed\n*/\nFactory.remove = function (id) {\n  delete __store[id];\n};\n\n/**\n * Clear all caches\n */\nFactory.clear = function () {\n  __store = {};\n};\n","import ch from \"felix\";\n\n/**\n* Available Versions\n*/\nconst VERSION = {\n  stable: \"1.0\",\n  dev: \"0.0\"\n};\n\n/**\n* Available Environment\n*/\nconst MARKETS = {\n  US: \"https://api.audible.com\",\n  UK: \"https://api.audible.co.uk\",\n  FR: \"https://api.audible.fr\",\n  DE: \"https://api.audible.de\",\n  JP: \"https://api.audible.co.jp\",\n  IT: \"https://api.audible.it\",\n  AU: \"https://api.audible.com.au\"\n};\n\n/**\n* Available Verbs\n*/\n\nconst VERB = {\n  GET: \"get\",\n  POST: \"post\",\n  PUT: \"put\",\n  DELETE: \"delete\"\n};\n\n/**\n* @class ClientAPI\n* Base for Audible API Client. It implements axios fetcher.\n* https://www.npmjs.com/package/axios\n* https://github.com/mzabriskie/axios/blob/master/LICENSE\n* options = { market,version,timeout }\n*/\nclass ClientAPI {\n  constructor(appID, customerID, options) {\n    this.cache = ch.create(customerID);\n    this.market = options && options.market ? options.market : MARKETS.US;\n    this.version =\n      options && options.version ? options.version : VERSION.stable;\n    this.env = `${this.market}/${this.version}/`;\n    this.cToken = customerID;\n    this.appID = appID;\n    this.debug = false;\n    this.timeout = options ? options.timeout : 3000;\n    this.caching = true;\n    this.default = {\n      verb: VERB.GET\n    };\n  }\n\n  refreshEnv() {\n    this.env = `${this.market}/${this.version}/`;\n  }\n  _retrieveMarket() {\n    return this.market;\n  }\n\n  _retrieveVersion() {\n    return this.version;\n  }\n\n  get customerToken() {\n    return this.cToken;\n  }\n\n  get Environment() {\n    return this.env;\n  }\n\n  get applicationID() {\n    return this.appID;\n  }\n\n  isCaching() {\n    return this.caching;\n  }\n\n  buildMyResponse(promise){\n    return promise.then(raw=>raw.json().then(body=>Object.assign({data:body},raw)));\n  }\n\n  /**\n\t\t* Async Fetcher\n\t\t*\n\t\t* @param {String} Action to Perform\n\t\t* @param {Object} Response Groups\n\t\t* @param {String} Method to Execute\n\t\t* @param {Boolean} Authenticate\n\t\t* @param {Object} Option parameter to Axios\n\t\t* @return {Promise} Object With Status and Data\n\t\t*/\n  request(action, response_groups, verb, authenticate, extras, uncached) {\n    let parameters = {};\n    let url = new URL( (extras && extras.url) || this.env + action);\n    \n    if (response_groups) {\n      response_groups =\n      response_groups instanceof Array\n        ? response_groups.join(\",\")\n        : response_groups;\n      parameters = { response_groups: response_groups };\n    }\n    if (extras && extras.params) Object.assign(parameters,extras.params);\n    Object.keys(parameters).forEach(key => url.searchParams.append(key, parameters[key]))\n\n    let options = {\n      method: verb || this.default.verb,\n      timeout: this.timeout\n    };\n\n    options.headers = {\n      \"Content-Type\": \"application/json\",\n      Accept: \"application/json\"\n    };\n\n    if (authenticate){\n      Object.assign(options.headers, this.authenticate());\n      options.credentials = 'include';\n    } \n\n    if (extras) options = Object.assign(options, extras);\n     \n    this.log(\"Options Requested:\", options);\n    if (!this.isCaching() || uncached === true) return this.buildMyResponse(fetch(url,options));\n\n    let options_string = JSON.stringify(options);\n    let cached_response = this.cache.get(options_string);\n    let _rq;\n    if (cached_response === undefined) {\n      _rq = this.buildMyResponse(fetch(url,options));\n      _rq.then(x => {\n        if (x.status === 200) {\n          this.cache.put(options_string, _rq);\n        }\n      });\n      return _rq;\n    } else {\n      return cached_response;\n    }\n  }\n\n  /**\n\t\t* Authenticate, validate credentials and generates header.\n\t\t* @return {String}\n\t\t*/\n  authenticate() {\n    if (!this.appID)\n      throw \"PublicKey and Customer ID required.\";\n    let headers = {\n      \"Client-ID\": this.appID\n    };\n    if (this.cToken ){\n      headers[\"Authorization\"] = `bearer ${this.cToken}`;\n    }\n    return headers;\n  }\n\n  /**\n\t\t* Starts Debug Mode\n\t\t* @return {Null} Activate Logs\n\t\t*/\n  log() {\n    if (this.debug) console.log(...arguments);\n  }\n}\n\nexport { VERSION, VERB, MARKETS };\nexport default ClientAPI;\n","import ClientAPI, { VERB, MARKETS, VERSION } from \"./client\";\n\nclass AudibleAPI extends ClientAPI {\n  /**\n\t* Retrieves the content symphony campaigns for a specific page in the MarketPlace. (Marketplace defined by api env)\n  * @param {String} pageID\n\t* @param {String} response_groups\n  * @param {Object} extra parameters in the request\n\t* @return {Promise} Returns the fetched page.\n\t*/\n  getPage(pageID, response_groups, options) {\n    return this.request(\n      `pages/${pageID}`,\n      response_groups,\n      VERB.GET,\n      true,\n      options\n    );\n  }\n\n  /**\n\t* Retrieves a tree of available categories in the MarketPlace. (Marketplace defined by api env)\n  * http://platform.audible.com/audible-api/API_GetCategoryById.html\n\t* @param {String} response_groups\n  * @param {Object} extra parameters in the request\n\t* @return {Promise} Returns the fetched three.\n\t*/\n  getCategories(response_groups, options) {\n    return this.request(\n      \"catalog/categories\",\n      response_groups,\n      VERB.GET,\n      true,\n      options\n    );\n  }\n\n  /**\n  * Retrieves All Channels Available in the MarketPlace. (Marketplace defined by api env)\n  * http://platform.audible.com/audible-api/API_GetCategoryById.html\n  * @param {String} response_groups\n  * @param {Object} extra parameters in the request\n  * @return {Promise} Returns the fetched categories.\n  */\n  getChannels(response_groups, options = {}, uncached = null) {\n    let param = { root: \"ShortsCurated\", categories_num_levels: 2 };\n    return this.request(\n      \"catalog/categories\",\n      response_groups,\n      VERB.GET,\n      true,\n      Object.assign(options, { params: param }),\n      uncached\n    );\n  }\n\n  /**\n * Retrieves a specific category from the CategorieID Prodived\n * http://platform.audible.com/audible-api/API_GetCategoryById.html\n * @param {String} categorieID\n * @param {String} response_groups\n * @param {Object} extra parameters in the request\n * @return {Promise} Returns the fetched subcategories.\n */\n  getCategory(categorieID, response_groups, options = {}) {\n    return this.request(\n      `catalog/categories/${categorieID}`,\n      response_groups,\n      VERB.GET,\n      true,\n      options\n    );\n  }\n\n  /**\n  * Retrieves specific product information from an asin\n  * http://platform.audible.com/audible-api/API_GetProduct.html\n  * @param {String} asin\n  * @param {String} response_groups\n  * @param {Object} extra parameters in the request\n  * @return {Promise} Returns the fetched subcategories.\n  */\n  getProduct(asin, response_groups, options) {\n    //response_groups = sku,product_desc,contributors\n    return this.request(\n      `catalog/products/${asin}`,\n      response_groups,\n      VERB.GET,\n      true,\n      options\n    );\n  }\n\n  /**\n  * Retrieves a collection of products based on the search criteria.\n  * http://platform.audible.com/audible-api/API_GetProducts.html\n  * @param {Object} search parameters\n  * @param {String} response_groups\n  * @param {Object} extra parameters in the request\n  * @return {Promise} Returns the fetched subcategories.\n  */\n  searchProducts(searchParameters, response_groups, options = {}) {\n    return this.request(\n      \"catalog/products\",\n      response_groups,\n      VERB.GET,\n      true,\n      Object.assign({ params: searchParameters }, options)\n    );\n  }\n\n  /**\n  * Retrieves reviews from an Asin\n  * http://platform.audible.com/audible-api/API_GetContentMetadata.html\n  * @param {asin} Asin\n  * @param {String} Response groups\n  * @param {Object} extra parameters in the request\n  * @return {Promise} Returns the fetched subcategories.\n  */\n  getProductReviews(asin, response_groups, options, uncached) {\n    return this.request(\n      `catalog/products/${asin}/reviews`,\n      response_groups,\n      VERB.GET,\n      true,\n      options,\n      uncached\n    );\n  }\n\n  /**\n  * Retrieves books from library purchased from set date. REQUIRES AUTHENTICATION\n  * @param {Object} search parameters\n  * @return {Promise} Returns the fetched subcategories.\n  */\n  getLibraryBooks(purchaseAfterDate, uncached, maxtime) {\n    //resource,option,parameters,verb,data\n    return this.request(\n      null, // as it uses dev server\n      null,\n      VERB.GET,\n      true,\n      {\n        url: `${this._retrieveMarket()}/${VERSION.dev}/library/books`,\n        timeout: maxtime || 9500,\n        params: {\n          purchaseAfterDate: purchaseAfterDate,\n          sortInAscendingOrder: \"true\",\n          response_groups: \"media\"\n        }\n      },\n      uncached\n    );\n  }\n\n  /**\n  * Retrieves a collection of products based on the search criteria. REQUIRES AUTHENTICATION\n  * http://platform.audible.com/audible-api/API_GetContentLicense.html\n  * @param {String} Asin\n  * @param {String} DRM Type\n  * @param {String} Consumption Type\n  * @return {Promise} Returns the fetched subcategories.\n  */\n  getProductStream(asin, drm_type, consumption_type, options = {}) {\n    let drm = drm_type || \"Hls\";\n    let type = consumption_type || \"Streaming\";\n\n    return this.request(\n      `content/${asin}/licenserequest`,\n      null,\n      VERB.POST,\n      true,\n      {\n        body: JSON.stringify(\n          Object.assign(options, { consumption_type: type, drm_type: drm })\n        )\n      },\n      true\n    );\n  }\n\n  /**\n  * Put product last position REQUIRES AUTHENTICATION\n  * http://platform.audible.com/audible-api/API_GetContentLicense.html\n  * @param {String} Asin\n  * @param {String} ACR\n  * @param {Object} Options\n  * @return {Promise} Returns the fetched subcategories.\n  */\n  putProductLastPosition(asin, acr, position, options = {}) {\n    return this.request(\n      `lastpositions/${asin}`,\n      null,\n      VERB.PUT,\n      true,\n      Object.assign(options, {\n        data: { acr: acr, asin: asin, position_ms: position }\n      })\n    );\n  }\n\n  /**\n  * Get product last position REQUIRES AUTHENTICATION\n  * http://platform.audible.com/audible-api/API_GetContentLicense.html\n  * @param {String} Asin\n  * @param {String} ACR\n  * @param {Object} Options\n  * @return {Promise} Returns the fetched subcategories.\n  */\n  getProductLastPosition(asin, acr, options = {}) {\n    return this.request(\n      `lastpositions/${asin}`,\n      null,\n      VERB.GET,\n      true,\n      Object.assign(options, { params: { acr: acr } }),\n      true\n    );\n  }\n\n  /**\n  * Seems like this call will be in deprecation as of right now, this is mainly used.  \n  * Retrieves a collection of possitions based on the search criteria. REQUIRES AUTHENTICATION\n  * http://platform.audible.com/audible-api/API_GetLastPositionHeardAnnotations.html\n  * @param {string} Asin\n  * @param {Object} extra parameters\n  * @return {Promise} Returns the fetched subcategories.\n  */\n  getProductsLastPosition(asin, options = {}) {\n\n    return this.request(\n      `annotations/lastpositions?asins=${asin}`, // Action\n      null,\n      VERB.GET, // Get Verb\n      true, // Required Headers\n      options,\n      true\n    );\n  }\n\n  /**\n\t* Retrieves a collection of products based on the search criteria. REQUIRES AUTHENTICATION\n  * http://platform.audible.com/audible-api/API_GetContentMetadata.html\n  * @param {asin} Asin\n\t* @param {String} Response groups\n  * @param {Object} extra parameters in the request\n\t* @return {Promise} Returns the fetched subcategories.\n\t*/\n  getProductMetadata(asin, response_groups, options) {\n    return this.request(\n      `content/${asin}/metadata`,\n      response_groups,\n      VERB.GET,\n      true,\n      options,\n      true\n    );\n  }\n\n  /**\n  * Retrieves a collection of products based on the search criteria. REQUIRES AUTHENTICATION\n  * http://platform.audible.com/audible-api/API_GetRecommendations.html\n  * @param {Object} response parameters\n  * @param {Number} number of results\n  * @param {Object} extra parameters in the request\n  * @return {Promise} Returns the fetched subcategories.\n  */\n  getProductRecomendations(response_groups, results, options = {}) {\n    return this.request(\n      \"recommendations\",\n      response_groups,\n      VERB.GET,\n      true,\n      Object.assign({ params: { num_results: results } }, options),\n      true\n    );\n  }\n\n  /**\n  * Retrieves a list of similar product to the given product (specified by its ASIN).\n  * http://platform.audible.com/audible-api/API_GetRecommendations.html\n  * @param {String} Identifier of the product to which similar products will be retrieved.\n  * @param {Array} Response Group Definition\n  * @param {Object} extra parameters in the request\n  * @return {Promise} Returns the fetched subcategories.\n  */\n  getSimilarProducts(asin, response_groups, options, uncached) {\n    return this.request(\n      `catalog/products/${asin}/sims`,\n      response_groups,\n      VERB.GET,\n      true,\n      options,\n      uncached\n    );\n  }\n\n  /**\n  * Retrieves a list of similar product to the given product (specified by its ASIN).\n  * http://platform.audible.com/audible-api/API_PutMetricsEvents.html\n  * @param {String} Asin Listened\n  * @param {Integer} Start Time of the Event\n  * @param {Integer} End Time of the Event\n  * @param {Integer} Initial Position of the Player\n  * @param {Integer} Final Position of the Player\n  * @param {Object} any other configuration or extra data.\n  * @return {Promise} Returns the fetched subcategories.\n  */\n  postListeningEvent(\n    asin,\n    startTimeStamp,\n    endTimeStamp,\n    startPosition,\n    endPosition,\n    length_of_book = 720000000,\n    timezone = \"America/New_York\",\n    eventType = \"Listening\",\n    owned = true,\n    store = \"Audible\",\n    listening_mode = \"Online\",\n    narration_speed = 1,\n    options\n  ) {\n    return this.request(\n      `stats/events`,\n      null,\n      VERB.PUT,\n      true,\n      Object.assign(\n        {\n          data: JSON.stringify({\n            stats: [\n              {\n                asin: asin,\n                asin_owned: owned,\n                event_timestamp: startTimeStamp,\n                event_end_timestamp: endTimeStamp,\n                event_start_position: startPosition,\n                event_end_position: endPosition,\n                event_type: eventType,\n                local_timezone: timezone,\n                store: store,\n                listening_mode: listening_mode,\n                narration_speed: narration_speed,\n                length_of_book: length_of_book\n              }\n            ]\n          })\n        },\n        options\n      ),\n      true\n    );\n  }\n\n  /**\n  * Retrieves results attached to open api action\n  * @param {String} Identifier of the product to which similar products will be retrieved.\n  * @param {Array} Response Grous\n  * @param {Object} Options pass to request based on axio options\n  * @param {Boolean} Secure request\n  * @param {Boolean} Caching version\n  * @return {Promise} Returns the fetched subcategories.\n  */\n  getRequest(action, response_groups, options, secure, uncached) {\n    return this.request(\n      action,\n      response_groups,\n      VERB.GET,\n      secure,\n      options,\n      uncached\n    );\n  }\n\n  /**\n  * Retrieves user profile information.\n  * @return {Promise} Returns the fetched subcategories.\n  */\n  getUserProfile() {\n    var options = {\n      url: \"https://api.amazon.com/user/profile\"\n    };\n    return this.request(\"\", null, VERB.GET, true, options);\n  }\n}\n\nexport default AudibleAPI;\n"],"names":["module","this","clear","prototype","put","key","val","__store","__size","get","remove","size","keys","oKeys","Object","obj","TypeError","result","hasOwnProperty","call","push","Factory","create","id","Cache","VERSION","MARKETS","VERB","ClientAPI","appID","customerID","options","cache","ch","market","version","env","cToken","debug","timeout","caching","default","refreshEnv","_retrieveMarket","_retrieveVersion","customerToken","Environment","applicationID","isCaching","buildMyResponse","promise","then","raw","json","body","assign","request","action","response_groups","verb","authenticate","extras","uncached","parameters","url","URL","Array","join","params","forEach","searchParams","append","headers","credentials","log","fetch","_rq","options_string","JSON","stringify","cached_response","undefined","x","status","console","arguments","getPage","pageID","getCategories","getChannels","root","categories_num_levels","getCategory","categorieID","getProduct","asin","searchProducts","searchParameters","getProductReviews","getLibraryBooks","purchaseAfterDate","maxtime","sortInAscendingOrder","getProductStream","drm_type","consumption_type","putProductLastPosition","acr","position","data","position_ms","getProductLastPosition","getProductsLastPosition","getProductMetadata","getProductRecomendations","results","num_results","getSimilarProducts","postListeningEvent","startTimeStamp","endTimeStamp","startPosition","endPosition","length_of_book","timezone","eventType","owned","store","listening_mode","narration_speed","stats","asin_owned","event_timestamp","event_end_timestamp","event_start_position","event_end_position","event_type","local_timezone","getRequest","secure","getUserProfile"],"mappings":"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"}